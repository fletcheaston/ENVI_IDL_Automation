# In progress.

# Because we split the tasks here, we need to keep track of unique FIDs between tasks.
# We can reuse the geoRefDims variable.
ENVI_FILE_QUERY, {geoRefFID}, dims=geoRefDims

# This does all the band math.
# Important parts include...
# EXP, which corresponds to the expression we want to do band math with. We give it a string, and ENVI parses this string.
# FID, which corresponds to an array of FIDs. We have to provide one FID for every band we use in our expression. The FIDs can and will be the same.
# OUT_NAME, which corresponds to the filename we're saving this to.
# POS, which corresponds to the bands in the expression. Bands in the expression are sorted alphanumerically by ENVI, so the band numbers we provide in POS need to be in numerical order.
# R_FID, which corresponds to the unique FID we hand off to task three.
ENVI_DOIT, 'MATH_DOIT', DIMS=geoRefDims, EXP={bandMathExpression}, FID=[{geoRefFIDArray}], OUT_NAME={bandedOutFile}, POS={bandMathNumbers}, R_FID={bandedFID}